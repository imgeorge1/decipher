<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8" />
  <title>Binary Decoder</title>
  <link rel="stylesheet" href="style.css">
  <link href="https://fonts.googleapis.com/css2?family=Fredoka+One&display=swap" rel="stylesheet">

</head>
<body>
  <h1><img src="dDVqExl.png" id="logo" alt="logo"></h1>
  <textarea id="binary" rows="10" cols="60" placeholder="Enter your code here"></textarea><br>
  <button id="animatedButton" onclick="decode()">Decode</button>
  <pre id="output"></pre>

  <script src="decoder.js"></script>
  <script>
    async function decode() {
      await Module.ready;
      const input = document.getElementById("binary").value;
      const ptr = Module.allocateUTF8(input);
      const resultPtr = Module._decode(ptr);
      const output = Module.UTF8ToString(resultPtr);
      document.getElementById("output").innerText = output;
    }
    const button = document.getElementById('animatedButton');
    let isDown = false;

    button.addEventListener('mouseenter', () => {
    if (!isDown) button.classList.add('hovered');
    });

    button.addEventListener('mouseleave', () => {
    button.classList.remove('hovered', 'pressed');
    isDown = false;
    });

    button.addEventListener('mousedown', () => {
    isDown = true;
    button.classList.remove('hovered');
    button.classList.add('pressed');
    });

    button.addEventListener('mouseup', () => {
    isDown = false;
    button.classList.remove('pressed');
    button.classList.add('hovered');
    });

    let logo = document.getElementById("logo");
    let easterEgg = 0
    logo.addEventListener("click", ()=>{
      easterEgg++
      console.log("easter egg clicked " + easterEgg + " times.");
      if (easterEgg == 3) {
        document.getElementById("binary").value = "01000001 01100110 01110111 01110111 01110110 00100000 01100101 01111000 01110000 00100000 01111000 00100000 01101010 01111000 01110000 01110000 01100110 01110011 01100010 00100000 01100100 01110110 01111000 01110001 01110001";
        
      }
    })

  </script>
</body>
</html>
